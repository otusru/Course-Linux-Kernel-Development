–û—Ç–ª–∏—á–Ω–æ! üöÄ –ü–æ–≥—Ä—É–∂–∞–µ–º—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏–π –≤–∞–∂–Ω–µ–π—à–∏–π —ç—Ç–∞–ø ‚Äî
**üîπ –£—Ä–æ–∫ 42. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —è–¥—Ä–∞: –ø–µ—Ä–≤—ã–µ —à–∞–≥–∏ –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ**

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

* –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥? –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?
* –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞ —è–¥—Ä–∞
* –ë—É—Ñ–µ—Ä –ª–æ–≥–æ–≤ –∏ –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω / –≤ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –ø–æ—Ä—Ç
* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π: DEBUG, INFO, WARN, ERROR
* –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: –ª–æ–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞, –æ—à–∏–±–∫–∏ syscall, –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π
* –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –±—É–¥—É—â–µ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –û–°

---

## üìñ –¢–µ–æ—Ä–∏—è: 2000+ —Å–ª–æ–≤ –æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ —è–¥—Ä–∞

### üîç –ß—Ç–æ —Ç–∞–∫–æ–µ –ª–æ–≥ —è–¥—Ä–∞?

–°–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥ (kernel log) ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–Ω—É—Ç—Ä–∏ —è–¥—Ä–∞: –æ—Ç –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –¥–æ —Å–±–æ–µ–≤ –∏ —Å–∏–Ω–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ —Å–º–µ—Ä—Ç–∏ (BSOD). –≠—Ç–æ –∫–∞–∫ –¥–Ω–µ–≤–Ω–∏–∫ —è–¥—Ä–∞ ‚Äî –≤ –Ω—ë–º —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –≤–∞–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –∞–Ω–æ–º–∞–ª–∏–∏.

–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –û–° –ª–æ–≥-—Ñ–∞–π–ª ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—Ç–ª–∞–¥–∫–∏. –í Linux —ç—Ç–æ `dmesg`, –≤ Windows ‚Äî –∂—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π. –í –Ω–∞—à–µ–π –û–° –º—ã —Ç–æ–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ–º –ª–æ–≥ ‚Äî —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å—Ç–æ–π, –∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ–±–∞–≤–∏–º —É—Ä–æ–≤–Ω–∏, –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏, –≤–æ–∑–º–æ–∂–Ω–æ, —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —Å–µ—Ç–∏ –∏–ª–∏ –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

### üí¨ –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

–õ–æ–≥ –Ω—É–∂–µ–Ω –¥–ª—è:

* –û—Ç–ª–∞–¥–∫–∏ –≤ —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ –∑–∞–≥—Ä—É–∑–∫–∏
* –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
* –í—ã–≤–æ–¥–∞ –æ—à–∏–±–æ–∫ –≤ —Ä–∞–±–æ—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
* –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –û–°

---

### üõ† –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è

–û–±—ã—á–Ω–æ —Å—Ç—Ä–æ–∫–∞ –ª–æ–≥–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```text
[INFO]  [0x0012]  process_exit(): –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ #3 —Å –∫–æ–¥–æ–º 0
```

–ì–¥–µ:

* `[INFO]` ‚Äî —É—Ä–æ–≤–µ–Ω—å —Å–æ–æ–±—â–µ–Ω–∏—è
* `[0x0012]` ‚Äî –∞–¥—Ä–µ—Å –≤—ã–∑–æ–≤–∞ –∏–ª–∏ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
* `process_exit()` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫
* `...` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ

---

### üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–æ–≥–≥–µ—Ä–∞ —è–¥—Ä–∞

1. –ë—É—Ñ–µ—Ä —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4–ö–ë)
2. –ú–∞–∫—Ä–æ—Å—ã `klog_info()`, `klog_warn()`, `klog_error()` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
3. –í—ã–≤–æ–¥ –≤ VGA (—á–µ—Ä–µ–∑ `kprintf`) –∏/–∏–ª–∏ COM-–ø–æ—Ä—Ç
4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä

---

## üß™ –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞: –ª–æ–≥–≥–µ—Ä —è–¥—Ä–∞ –Ω–∞ C23

–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `kernel/log.c` –∏ `log.h`:

### `log.h`

```c
#ifndef LOG_H
#define LOG_H

typedef enum {
    LOG_DEBUG,
    LOG_INFO,
    LOG_WARN,
    LOG_ERROR
} log_level_t;

void klog(log_level_t level, const char* fmt, ...);

#define klog_info(...)  klog(LOG_INFO,  __VA_ARGS__)
#define klog_warn(...)  klog(LOG_WARN,  __VA_ARGS__)
#define klog_err(...)   klog(LOG_ERROR, __VA_ARGS__)
#define klog_dbg(...)   klog(LOG_DEBUG, __VA_ARGS__)

#endif
```

---

### `log.c`

```c
#include "log.h"
#include "vga.h" // –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω
#include <stdarg.h>
#include <stdio.h>

static const char* level_str[] = {
    [LOG_DEBUG] = "[DEBUG]",
    [LOG_INFO]  = "[INFO]",
    [LOG_WARN]  = "[WARN]",
    [LOG_ERROR] = "[ERROR]"
};

void klog(log_level_t level, const char* fmt, ...) {
    char buffer[256];

    va_list args;
    va_start(args, fmt);

    vsnprintf(buffer, sizeof(buffer), fmt, args);
    va_end(args);

    kprintf("%s %s\n", level_str[level], buffer);
}
```

> üí° `kprintf` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ VGA-—ç–∫—Ä–∞–Ω. –í –±—É–¥—É—â–∏—Ö —É—Ä–æ–∫–∞—Ö –µ—ë –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –≤—ã–≤–æ–¥–æ–º —á–µ—Ä–µ–∑ COM –∏–ª–∏ USB.

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —è–¥—Ä–µ

```c
#include "log.h"

void process_exit(int status) {
    klog_info("–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ #%d —Å –∫–æ–¥–æ–º %d", current_process->pid, status);
    ...
}
```

---

### üì¶ –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

* –£—Ä–æ–≤–Ω–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–Ω–µ –≤—ã–≤–æ–¥–∏–º DEBUG –≤ —Ä–µ–ª–∏–∑–µ)
* –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥ –≤ RAM-–±–ª–æ–∫
* –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª–æ–≥ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä —á–µ—Ä–µ–∑ COM/UART

---

### üìà –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 5/10

---

### ‚è± –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è:

* –¢–µ–æ—Ä–∏—è: 1 —á
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `log.c/.h`: 2 —á
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —è–¥—Ä–æ: 1 —á
* –û—Ç–ª–∞–¥–∫–∞, —Ç–µ—Å—Ç—ã: 1 —á
  **–ò—Ç–æ–≥–æ: \~5 —á–∞—Å–æ–≤**

---

### üë®‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –õ–µ–∫—Ü–∏—è: –∑–∞—á–µ–º —è–¥—Ä—É –Ω—É–∂–µ–Ω –ª–æ–≥
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: –∂–∏–≤–æ–π –ª–æ–≥ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
* –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `klog`
* –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ª–æ–≥ –≤ 3 —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª—è —è–¥—Ä–∞

---

### üìö –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* [Linux dmesg –∏ printk](https://www.kernel.org/doc/html/latest/core-api/printk-basics.html)
* [OSDev Logging](https://wiki.osdev.org/Debugging)
* [Serial debugging in QEMU](https://wiki.osdev.org/Serial_Porting)

---

### üß† –ò—Ç–æ–≥–∏:

–¢–µ–ø–µ—Ä—å —Ç–≤–æ—è –û–° –Ω–µ –Ω–µ–º–∞—è ‚Äî –æ–Ω–∞ **–≥–æ–≤–æ—Ä–∏—Ç** –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç!
–≠—Ç–æ –≤–∞–∂–Ω—ã–π —à–∞–≥ –∫ —É–¥–æ–±–Ω–æ–π –æ—Ç–ª–∞–¥–∫–µ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—é.

---

–ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ? üòé
–°–∫–∞–∂–∏ **–¥–∞–¥–∞** ‚Äî –∏ –≤ **–£—Ä–æ–∫–µ 43** –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º **—Å–∏—Å—Ç–µ–º—É –ø–∞–º—è—Ç–∏ —è–¥—Ä–∞ –∏ —É—á—ë—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–π**, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å, –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç —Ä–µ—Å—É—Ä—Å—ã. üß†üíªüîç
