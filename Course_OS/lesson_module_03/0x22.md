–û—Ç–ª–∏—á–Ω–æ! –ü–æ–≥—Ä—É–∂–∞–µ–º—Å—è –≥–ª—É–±–∂–µ! üíæüß†

---

# üîπ –£—Ä–æ–∫ 22. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏ Page Fault –≤ –û–° üö®üìâ

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

–°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ –≤–∞—à–∞ –û–° –¥–æ–ª–∂–Ω–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **–∏—Å–∫–ª—é—á–µ–Ω–∏—è**, –æ—Å–æ–±–µ–Ω–Ω–æ **–æ—à–∏–±–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü (Page Fault)**. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏, –±–µ–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –∏ –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –í—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–π–º–∞—Ç—å, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —á—Ç–æ —Ç–∞–∫–æ–µ CR2-—Ä–µ–≥–∏—Å—Ç—Ä, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥—ã –æ—à–∏–±–æ–∫ –∏ —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–ª–∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏.

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (‚âà2500‚Äì3000 —Å–ª–æ–≤)

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (Exceptions)

* –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (CPU traps): –≤—ã–∑–≤–∞–Ω—ã —Å–∞–º–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
* –ü—Ä–∏–º–µ—Ä—ã: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å, Page Fault, General Protection Fault
* –ò–º–µ—é—Ç **–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** –ø–µ—Ä–µ–¥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏ (IRQs)

---

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π

* Fault (–º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å)
* Trap (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
* Abort (–Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–µ –æ—à–∏–±–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–æ–π–Ω–æ–π Page Fault)

---

### –ß—Ç–æ —Ç–∞–∫–æ–µ Page Fault?

* –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ **–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ**, –∫–æ—Ç–æ—Ä–∞—è:

  * –ù–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ –≤ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –ø–∞–º—è—Ç—å
  * –ù–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å—É (–Ω–∞—Ä—É—à–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞)
  * –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏
* –¢–∏–ø–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ –ª–µ–Ω–∏–≤–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏

---

### Page Fault –≤ x86-64

* **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Ññ14** (–≤ —Ç–∞–±–ª–∏—Ü–µ IDT)
* CPU –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä `CR2` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç **–∞–¥—Ä–µ—Å, –≤—ã–∑–≤–∞–≤—à–∏–π fault**
* –û—à–∏–±–∫–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è **–∫–æ–¥–æ–º –æ—à–∏–±–∫–∏**:

  * –ë–∏—Ç 0 ‚Äî 0 (–Ω–µ–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞), 1 (–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è, –Ω–æ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω)
  * –ë–∏—Ç 1 ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏
  * –ë–∏—Ç 2 ‚Äî —Ä–µ–∂–∏–º: 0 (kernel), 1 (user)

---

### –†–µ–∞–∫—Ü–∏—è –û–° –Ω–∞ Page Fault

1. –°—á–∏—Ç—ã–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ CR2
2. –†–∞–∑–±–æ—Ä –∫–æ–¥–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü
4. –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è:

   * –ê–ª–ª–æ—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
   * –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
   * –í—ã–±—Ä–æ—Å–∏—Ç—å —è–¥—Ä–æ (Kernel Panic üò±)

---

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NX-–±–∏—Ç–∞ (No Execute)
* SMEP / SMAP: –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —è–¥—Ä—É
* KPTI (Kernel Page Table Isolation)

---

### –¢—Ä–µ–Ω–¥—ã 2025 –≥–æ–¥–∞

* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
* –ú–µ—Ö–∞–Ω–∏–∑–º—ã "demand paging" –¥–ª—è WASM –∏ AI-–º–æ–¥–µ–ª–µ–π
* –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∫–∞–∫ —Å–ø–æ—Å–æ–± –∑–∞—â–∏—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

---

## üìò –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* Intel¬Æ SDM Volume 3: Chapter 5 (Interrupt and Exception Handling)
* AMD64 Architecture Programmer‚Äôs Manual Vol. 2
* Linux source: `arch/x86/mm/fault.c`
* –ö–Ω–∏–≥–∞: ‚ÄúLinux Kernel Development‚Äù
* –í–∏–¥–µ–æ: ‚ÄúCrash Course on x86 Page Faults‚Äù –Ω–∞ YouTube

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ:

üî® –ó–∞–¥–∞—á–∏:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—è #14 (Page Fault)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –æ—à–∏–±–∫–∏
3. –ü–µ—á–∞—Ç–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –∏—Å–∫–ª—é—á–µ–Ω–∏—è: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –Ω–∞—Ä—É—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞, –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–ø–∏—Å–∏ –∏ —Ç.–¥.
4. –ê–ª–ª–æ—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "–Ω–∞ –ª–µ—Ç—É" –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Ä–µ–∞–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞)

---

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ C23:

```c
#include <stdint.h>
#include <stdio.h>

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CPU state –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏
typedef struct {
    uint64_t error_code;
    uint64_t cr2;
    uint64_t rip;
    uint64_t cs;
    uint64_t rflags;
} exception_context_t;

// –ü—Ä–æ—Å—Ç–æ–π –ª–æ–≥–≥–µ—Ä page fault
void handle_page_fault(exception_context_t* ctx) {
    uint64_t addr = ctx->cr2;
    uint64_t code = ctx->error_code;

    printf("Page Fault –ø–æ –∞–¥—Ä–µ—Å—É: 0x%llx\n", addr);
    printf("–ö–æ–¥ –æ—à–∏–±–∫–∏: 0x%llx\n", code);

    if (!(code & 1)) {
        printf("–ü—Ä–∏—á–∏–Ω–∞: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç\n");
    } else {
        printf("–ü—Ä–∏—á–∏–Ω–∞: –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞\n");
    }

    if (code & 2) {
        printf("–û–ø–µ—Ä–∞—Ü–∏—è: –ó–∞–ø–∏—Å—å\n");
    } else {
        printf("–û–ø–µ—Ä–∞—Ü–∏—è: –ß—Ç–µ–Ω–∏–µ\n");
    }

    if (code & 4) {
        printf("–†–µ–∂–∏–º: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π\n");
    } else {
        printf("–†–µ–∂–∏–º: –Ø–¥—Ä–æ\n");
    }

    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
}
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 8.5/10

---

## ‚è± –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ: 9 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 5 —á
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 4 —á

---

## üßë‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –õ–µ–∫—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏ –¥–∞–º–ø–æ–≤ –ø–∞–º—è—Ç–∏
* –ñ–∏–≤–æ–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ Page Fault –≤ QEMU
* –†–∞–±–æ—Ç–∞ –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
* –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

üî• –•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ **—É—Ä–æ–∫—É 23**? –ü—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏ **–¥–∞–¥–∞** ‚Äî –∏ –º—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —ç—Ç–æ—Ç —Ö–∞—Ä–¥–∫–æ—Ä–Ω—ã–π –∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π –ø—É—Ç—å! üí™üß©
