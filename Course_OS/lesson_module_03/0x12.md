–û—Ç–ª–∏—á–Ω–æ! üöÄ –ü–æ–≥—Ä—É–∂–∞–µ–º—Å—è –¥–∞–ª—å—à–µ.

---

# üîπ –£—Ä–æ–∫ 12. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ: –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –º–æ–¥–µ–ª–∏ üß†üíæ

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

–°–µ–≥–æ–¥–Ω—è –∏–∑—É—á–∞–µ–º, –∫–∞–∫ –û–° —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é –∫–æ–º–ø—å—é—Ç–µ—Ä–∞. –ü–æ–π–º—ë–º –ø—Ä–∏–Ω—Ü–∏–ø—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç—É —Å –ø–∞–º—è—Ç—å—é –Ω–∞ —É—Ä–æ–≤–Ω–µ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä—ã. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –Ω–∞–≤—ã–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –û–°.

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (‚âà2500 —Å–ª–æ–≤)

### –í–≤–µ–¥–µ–Ω–∏–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

* –ü–∞–º—è—Ç—å ‚Äî –æ–¥–Ω–∞ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
* –ó–∞–¥–∞—á–∏ –û–°: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–∞–º—è—Ç—å –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
* –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è, –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

---

### –ê–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ

* –õ–æ–≥–∏—á–µ—Å–∫–æ–µ (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ) vs —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
* –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã: MMU (Memory Management Unit)
* –¢–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü, —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è, —Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

---

### –ú–æ–¥–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é

* –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ (fixed partitioning)
* –ü–µ—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ (dynamic partitioning)
* –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å —Å –ø–æ–¥–∫–∞—á–∫–æ–π (paging, swapping)

---

### –í—ã–¥–µ–ª–µ–Ω–∏–µ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

* –°—Ç–µ–∫, –∫—É—á–∞, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å
* –ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è: –ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –±–ª–æ–∫, –ª—É—á—à–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –±–ª–æ–∫, –∫—É—á–∞
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ —è–¥—Ä–µ –û–° vs –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ

---

### –ó–∞—â–∏—Ç–∞ –ø–∞–º—è—Ç–∏

* –ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
* –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: —á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å, –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
* –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç—É–ø–∞

---

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

* Copy-on-write
* Lazy allocation
* Memory-mapped files
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TLB (Translation Lookaside Buffer)

---

## üìò –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* Intel Software Developer Manuals ‚Äî —Ä–∞–∑–¥–µ–ª—ã –æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏
* –ö–Ω–∏–≥–∞ ¬´Operating Systems: Three Easy Pieces¬ª ‚Äî –≥–ª–∞–≤—ã –ø–æ –ø–∞–º—è—Ç–∏
* Linux kernel documentation –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–∞–º—è—Ç—å—é
* –°—Ç–∞—Ç—å–∏ –Ω–∞ OSDev Wiki ‚Äî Memory management

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ:

üî® –ó–∞–¥–∞—á–∏:

1. –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–º—è—Ç–∏ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `malloc` –∏ `free` –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –±–ª–æ–∫–∞
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏ –ø–∞–º—è—Ç–∏
3. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä, –≤—ã–¥–µ–ª—è—é—â–∏–π –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—â–∏–π –ø–∞–º—è—Ç—å –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—á–∞—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (C23):

```c
#include <stdio.h>
#include <stddef.h>
#include <stdint.h>

#define MEMORY_SIZE 1024

typedef struct Block {
    size_t size;
    struct Block* next;
} Block;

static uint8_t memory[MEMORY_SIZE];
static Block* free_list = (Block*)memory;

void memory_init() {
    free_list->size = MEMORY_SIZE - sizeof(Block);
    free_list->next = NULL;
}

void* simple_malloc(size_t size) {
    Block* current = free_list;
    Block* prev = NULL;

    while (current) {
        if (current->size >= size) {
            if (current->size > size + sizeof(Block)) {
                // –†–∞–∑–¥–µ–ª—è–µ–º –±–ª–æ–∫
                Block* new_block = (Block*)((uint8_t*)current + sizeof(Block) + size);
                new_block->size = current->size - size - sizeof(Block);
                new_block->next = current->next;

                current->size = size;
                current->next = NULL;

                if (prev) {
                    prev->next = new_block;
                } else {
                    free_list = new_block;
                }
            } else {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–µ—Å—å –±–ª–æ–∫
                if (prev) {
                    prev->next = current->next;
                } else {
                    free_list = current->next;
                }
            }
            return (void*)((uint8_t*)current + sizeof(Block));
        }
        prev = current;
        current = current->next;
    }
    return NULL;  // –ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏
}

void simple_free(void* ptr) {
    if (!ptr) return;

    Block* block = (Block*)((uint8_t*)ptr - sizeof(Block));
    block->next = free_list;
    free_list = block;
}

void print_free_list() {
    printf("–°–≤–æ–±–æ–¥–Ω—ã–µ –±–ª–æ–∫–∏:\n");
    Block* current = free_list;
    while (current) {
        printf("–ê–¥—Ä–µ—Å: %p, –†–∞–∑–º–µ—Ä: %zu\n", (void*)current, current->size);
        current = current->next;
    }
}

int main() {
    memory_init();
    printf("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏...\n");
    print_free_list();

    void* p1 = simple_malloc(100);
    printf("–í—ã–¥–µ–ª–µ–Ω–∞ –ø–∞–º—è—Ç—å p1: %p\n", p1);
    print_free_list();

    void* p2 = simple_malloc(200);
    printf("–í—ã–¥–µ–ª–µ–Ω–∞ –ø–∞–º—è—Ç—å p2: %p\n", p2);
    print_free_list();

    simple_free(p1);
    printf("–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞ –ø–∞–º—è—Ç—å p1\n");
    print_free_list();

    return 0;
}
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 6/10

---

## ‚è± –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ: 7 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 4 —á
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 3 —á

---

## üßë‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –õ–µ–∫—Ü–∏—è —Å —Ä–∞–∑–±–æ—Ä–æ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø–∞–º—è—Ç–∏
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–º—è—Ç–∏
* –°—Ö–µ–º—ã —Ä–∞–±–æ—Ç—ã —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ–º –±–ª–æ–∫–æ–≤
* –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
* –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–∏—è–Ω–∏–µ —Å–æ—Å–µ–¥–Ω–∏—Ö —Å–≤–æ–±–æ–¥–Ω—ã—Ö –±–ª–æ–∫–æ–≤ (coalescing)

---

–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å? –ñ–¥—É —Ç–≤–æ—ë **–¥–∞**! üåü
