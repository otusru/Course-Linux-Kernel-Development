–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ **–£—Ä–æ–∫ 35**, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã —Å–æ–∑–¥–∞–¥–∏–º **–Ω–∞—à—É –ø–µ—Ä–≤—É—é –∫–æ–º–∞–Ω–¥–Ω—É—é –æ–±–æ–ª–æ—á–∫—É (Shell)**. –ò–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –º–∞–≥–∏—è: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç **–≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã**, –∞ —Å–∏—Å—Ç–µ–º–∞ ‚Äî **–∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å**. üßô‚Äç‚ôÇÔ∏èüìü

---

## üîπ –£—Ä–æ–∫ 35. –°–æ–∑–¥–∞–Ω–∏–µ Shell ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–º–∞–Ω–¥ üêöüñ•Ô∏è

---

### üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

* –ß—Ç–æ —Ç–∞–∫–æ–µ shell –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω
* –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–∞–Ω–¥–Ω–æ–π –æ–±–æ–ª–æ—á–∫–∏
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥, —Ä–∞–∑–±–æ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `help`, `clear`, `reboot`)
* –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É –∫–æ–º–∞–Ω–¥

---

## üìñ –¢–µ–æ—Ä–∏—è

### üß† –ß—Ç–æ —Ç–∞–∫–æ–µ shell?

Shell (–∫–æ–º–∞–Ω–¥–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞) ‚Äî —ç—Ç–æ **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ —è–¥—Ä–æ–º –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã**. –≠—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è:

1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–≤–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ–≥–æ (–ø–∞—Ä—Å–∏–Ω–≥)
3. –ò—Å–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã ‚Äî –ª–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é, –ª–∏–±–æ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ shell (bash, zsh) ‚Äî —Å–ª–æ–∂–Ω—ã. –ú—ã —Å–æ–∑–¥–∞–¥–∏–º **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø**, –∫–æ—Ç–æ—Ä—ã–π:

* –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ (`>`)
* –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞
* –†–∞–∑–±–∏—Ä–∞–µ—Ç –µ—ë –Ω–∞ –∫–æ–º–∞–Ω–¥—É –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
* –í—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞

---

### üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

```c
typedef void (*command_func_t)(int argc, char** argv);

typedef struct {
    const char* name;
    const char* help;
    command_func_t func;
} command_t;
```

---

### üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ Shell:

```c
#include <stdbool.h>
#include <string.h>
#include <stdlib.h>

#define MAX_LINE 128
#define MAX_ARGS 8

static char input[MAX_LINE];

void shell_loop() {
    while (true) {
        write(1, "> ", 2);
        kgets(input, MAX_LINE);

        int argc = 0;
        char* argv[MAX_ARGS] = {0};
        char* token = strtok(input, " ");
        while (token && argc < MAX_ARGS) {
            argv[argc++] = token;
            token = strtok(NULL, " ");
        }

        if (argc == 0) continue;

        if (!handle_command(argc, argv)) {
            write(1, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞\n", 40);
        }
    }
}
```

---

### üìò –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```c
void cmd_help(int argc, char** argv);
void cmd_clear(int argc, char** argv);
void cmd_reboot(int argc, char** argv);

command_t commands[] = {
    {"help", "–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥", cmd_help},
    {"clear", "–û—á–∏—Å—Ç–∏—Ç—å —ç–∫—Ä–∞–Ω", cmd_clear},
    {"reboot", "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É", cmd_reboot},
    {NULL, NULL, NULL}
};

bool handle_command(int argc, char** argv) {
    for (int i = 0; commands[i].name; i++) {
        if (strcmp(argv[0], commands[i].name) == 0) {
            commands[i].func(argc, argv);
            return true;
        }
    }
    return false;
}
```

---

### üß™ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥:

```c
void cmd_help(int argc, char** argv) {
    for (int i = 0; commands[i].name; i++) {
        write(1, commands[i].name, strlen(commands[i].name));
        write(1, " - ", 3);
        write(1, commands[i].help, strlen(commands[i].help));
        write(1, "\n", 1);
    }
}

void cmd_clear(int argc, char** argv) {
    for (int i = 0; i < 25; i++) {
        write(1, "\n", 1);
    }
}

void cmd_reboot(int argc, char** argv) {
    outb(0x64, 0xFE); // –ø—Ä–æ—Å—Ç–æ–π –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ x86
}
```

---

### üíª –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:

```shell
> help
help - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
clear - –û—á–∏—Å—Ç–∏—Ç—å —ç–∫—Ä–∞–Ω
reboot - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

> reboot
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 5/10

–†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º, —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–µ–π –∫–æ–º–∞–Ω–¥ ‚Äî –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏ –ø–æ–ª–µ–∑–Ω–∞—è –∑–∞–¥–∞—á–∞.

---

## ‚è± –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è: 6 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 2 —á
* –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫: 1 —á
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥: 2 —á
* –¢–µ—Å—Ç: 1 —á

---

## üë®‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –õ–µ–∫—Ü–∏—è: –ü—Ä–∏–Ω—Ü–∏–ø—ã CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: –ú–∏–Ω–∏-shell –≤ –¥–µ–π—Å—Ç–≤–∏–∏
* –°—Ö–µ–º–∞: —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
* –ü—Ä–∞–∫—Ç–∏–∫–∞: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `echo`, `uptime`, `time`
* –î–æ–º–∞—à–∫–∞: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `meminfo`

---

## üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã:

* [UNIX Shell Basics (man bash)](https://www.gnu.org/software/bash/manual/bash.html)
* [OSDev shell design](https://wiki.osdev.org/Shell)
* [C23: —Å—Ç—Ä–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3007.pdf)

---

‚úÖ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üéâ –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å **–Ω–∞—Å—Ç–æ—è—â–∞—è –æ–±–æ–ª–æ—á–∫–∞**, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ! –°–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —à–∞–≥ ‚Äî –∑–∞–ø—É—Å–∫–∞—Ç—å **–≤–Ω–µ—à–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã** –∏ –¥–æ–±–∞–≤–∏—Ç—å **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º** (user mode).

üîú –•–æ—á–µ—à—å –ø–µ—Ä–µ–π—Ç–∏ –∫ **–£—Ä–æ–∫—É 36: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ (User Space) –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**?

–°–∫–∞–∂–∏ **–¥–∞–¥–∞**, –∏ –º—ã –ø–æ–≥—Ä—É–∂–∞–µ–º—Å—è –µ—â—ë –≥–ª—É–±–∂–µ! üß†üíæ
