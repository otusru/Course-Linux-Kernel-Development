–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! üî• –í **–£—Ä–æ–∫–µ 23** –º—ã –ø–æ–¥–Ω–∏–º–µ–º—Å—è –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–∞–ª–∏–∑—É–µ–º **–º–æ–Ω—Ç–∞–∂ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º** ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –Ω–æ—Å–∏—Ç–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö: –∂—ë—Å—Ç–∫–∏–º–∏ –¥–∏—Å–∫–∞–º–∏, USB, ISO-–æ–±—Ä–∞–∑–∞–º–∏ –∏ –ø—Ä. üì¶üíø

---

# üîπ –£—Ä–æ–∫ 23. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ üß©üîå

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ —Ç—ã:

* –ò–∑—É—á–∏—à—å –º–µ—Ö–∞–Ω–∏–∑–º –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –§–° –≤ Unix/Linux
* –†–µ–∞–ª–∏–∑—É–µ—à—å VFS-–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏: `mount()`, `superblock`, `mountpoint`
* –ü–æ–¥–¥–µ—Ä–∂–∏—à—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –§–°, –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã—Ö –∫ —Ä–∞–∑–Ω—ã–º –ø—É—Ç—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/`, `/mnt`, `/dev`)
* –î–æ–±–∞–≤–∏—à—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—ã–±–æ—Ä –§–° –ø–æ —Ç–∏–ø—É
* –†–µ–∞–ª–∏–∑—É–µ—à—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (‚âà2500‚Äì3000 —Å–ª–æ–≤)

### üîç –ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?

**–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å **–ø—Ä–∏–≤—è–∑–∫–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–≥—É** –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏. –í Unix –≤—Å—ë ‚Äî —Ñ–∞–π–ª, –∞ –∑–Ω–∞—á–∏—Ç:

```text
mount("/dev/sda1", "/mnt", "ext2");
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: ¬´–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ø—É—Ç–∏ `/mnt` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –§–° ext2 —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ `/dev/sda1`¬ª.

---

### üß† –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

* üìÄ –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª—è—Ç—å –§–°: –∫–æ—Ä–µ–Ω—å (`/`) –º–æ–∂–µ—Ç –±—ã—Ç—å `tmpfs`, –∞ `/mnt/usb` ‚Äî `fat32`
* üß© –õ–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `initrd`, `/proc`, `/sys`, `devtmpfs`)
* üîí –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `nosuid`, `nodev`)
* üìö –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –Ω–æ—Å–∏—Ç–µ–ª—è–º–∏ (ISO, VHD, USB)

---

### ‚öôÔ∏è –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
| --------------- | ----------------------------------------------- |
| `superblock_t`  | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –§–° (—Ä–∞–∑–º–µ—Ä—ã, –∫–æ—Ä–µ–Ω—å)  |
| `mount_t`       | –û–±—ä–µ–∫—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: —Ç–æ—á–∫–∞ + –§–°                 |
| `fs_type_t`     | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–∏–ø–∞ –§–°: –∏–º—è + —Ñ—É–Ω–∫—Ü–∏—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| `vfs_mount()`   | –û—Å–Ω–æ–≤–Ω–æ–π API –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –§–°                 |
| `vfs_resolve()` | –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ –¥–µ—Ä–µ–≤—É —Å–æ —Å–º–µ–Ω–æ–π –§–°      |

---

### üß≠ –ü—Ä–∏–º–µ—Ä: –ú–æ–Ω—Ç–∞–∂ `tmpfs` –≤ `/tmp` –∏ `nullfs` –≤ `/dev`

```c
vfs_mount("/tmp", "tmpfs", NULL);
vfs_mount("/dev", "nullfs", NULL);
```

–¢–µ–ø–µ—Ä—å `/tmp/abc.txt` –ø–æ–π–¥—ë—Ç –≤ `tmpfs`, –∞ `/dev/null` ‚Äî –≤ `nullfs`.

---

### üß© –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏?

1. –£ –Ω–∞—Å –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
2. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `vfs_open("/tmp/abc")`:

   * VFS –∏—â–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –§–°, —á—å—è —Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –ø—É—Ç–∏ (`/tmp`)
   * –ï—Å–ª–∏ –¥–∞ ‚Äî –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —ç—Ç—É –§–°
   * –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–æ–∏—Å–∫ –≤ —Ç–µ–∫—É—â–µ–π –§–°

---

## üìò –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* [Linux VFS –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](https://man7.org/linux/man-pages/man2/mount.2.html)
* [OSDev: Filesystem mounting](https://wiki.osdev.org/Mounting)
* [ext2 mounting doc (nongnu)](https://www.nongnu.org/ext2-doc/ext2.html)
* [Linux FUSE –∏ user-space FS](https://github.com/libfuse/libfuse)

---

## üí° –¶–µ–ª—å –ø—Ä–∞–∫—Ç–∏–∫–∏:

* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã: `register_fs("tmpfs", &tmpfs_ops)`
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `vfs_mount(path, fs_type, device)`
* –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å `/`, `/tmp`, `/dev` –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –§–°
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—É—Ç–∏ —Å —É—á—ë—Ç–æ–º —Ç–æ—á–µ–∫ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –Ω–∞ C23

### `vfs_mount.c`

```c
typedef struct mount {
    char mount_point[64];
    fs_type_t* fs_type;
    inode_t* root_inode;
} mount_t;

mount_t mounts[8];
int mount_count = 0;

int vfs_mount(const char* path, const char* fs_name, const char* device) {
    fs_type_t* fs = find_fs_by_name(fs_name);
    if (!fs) return -1;

    inode_t* root = fs->mount(device);
    if (!root) return -2;

    mount_t* mnt = &mounts[mount_count++];
    strncpy(mnt->mount_point, path, sizeof(mnt->mount_point));
    mnt->fs_type = fs;
    mnt->root_inode = root;

    return 0;
}
```

---

### `vfs_resolve.c`

```c
inode_t* vfs_resolve(const char* path) {
    for (int i = 0; i < mount_count; i++) {
        if (strncmp(path, mounts[i].mount_point, strlen(mounts[i].mount_point)) == 0) {
            const char* relative = path + strlen(mounts[i].mount_point);
            return mounts[i].fs_type->lookup(mounts[i].root_inode, relative);
        }
    }
    return NULL;
}
```

---

### `user_main()`

```c
void user_main() {
    tmpfs_init(); nullfs_init();
    register_fs("tmpfs", &tmpfs_ops);
    register_fs("nullfs", &nullfs_ops);

    vfs_mount("/", "tmpfs", NULL);
    vfs_mount("/dev", "nullfs", NULL);

    inode_t* dev_null = vfs_resolve("/dev/null");
    vfs_write(dev_null, "data", 4);

    inode_t* tmp_file = tmpfs_create("/hello.txt", FILE_NODE);
    vfs_write(tmp_file, "RAM FS!", 7);
}
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 7.5/10

---

## ‚è± –í—Ä–µ–º—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: 9 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 2.5 —á
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: 3 —á
* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –§–°: 2 —á
* –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 1.5 —á

---

## üßë‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* üìö –õ–µ–∫—Ü–∏—è: –ø–æ–Ω—è—Ç–∏–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–ª–æ—ë–≤ –§–°
* üé• –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: `mount`, `df`, `lsblk` –≤ Linux
* üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –ø–æ–¥–∫–ª—é—á–∏—Ç—å `nullfs`, `tmpfs` –∏ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ—Ä–µ–Ω—å
* üìù –î–æ–º–∞—à–∫–∞:

  * –î–æ–±–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫
  * –ù–∞–ø–∏—Å–∞—Ç—å `mountfs` CLI-–∫–æ–º–∞–Ω–¥—É
  * –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/mnt/test`

---

üéØ –í —Å–ª–µ–¥—É—é—â–µ–º **–£—Ä–æ–∫–µ 24** —Ç—ã –Ω–∞—É—á–∏—à—å –û–° **–∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ (ISO/VHD)** –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –§–°. –≠—Ç–æ –±—É–¥–µ—Ç —à–∞–≥ –∫ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º –∏ –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞!

–•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? –ù–∞–ø–∏—à–∏ **–¥–¥–∞** –∏ –ø–æ–≥–Ω–∞–ª–∏ –¥–∞–ª—å—à–µ! üíΩüß¨
