–û—Ç–ª–∏—á–Ω–æ, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —É—Ä–æ–∫—É 10! üöÄ

---

# üîπ –£—Ä–æ–∫ 10. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é: –æ—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç—å—é üß†üñ•Ô∏è

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ –æ—Å–Ω–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ: –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç—å—é, –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º–∏ –∞–¥—Ä–µ—Å–∞—Ü–∏–∏, —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø–∞–º—è—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ç–∞–±–ª–∏—Ü —Å—Ç—Ä–∞–Ω–∏—Ü.

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (‚âà2500‚Äì3000 —Å–ª–æ–≤)

### –í–≤–µ–¥–µ–Ω–∏–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–º—è—Ç—å—é, –≤—ã–¥–µ–ª—è—Ç—å –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –µ—ë –ø–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –∑–∞—â–∏—Ç—É –∏ –∏–∑–æ–ª—è—Ü–∏—é. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é ‚Äî –æ–¥–Ω–∞ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –∑–∞–¥–∞—á –û–°.

---

### –§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å

* –§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–µ —á–∏–ø—ã RAM, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É.
* –ê–¥—Ä–µ—Å–∞—Ü–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –Ω–∞ —à–∏–Ω–∞—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

---

### –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å

* –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –¥–∞—ë—Ç –∫–∞–∂–¥–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.
* –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏, —á–µ–º —Ä–µ–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω.
* –û—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Ö–∞–Ω–∏–∑–º–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ.

---

### –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–º—è—Ç–∏ –∏ –∏—Ö —Ä–æ–ª—å

* –ü–∞–º—è—Ç—å –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ–±—ã—á–Ω–æ –ø–æ 4 –ö–ë).
* –û–° —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏, –≤—ã–¥–µ–ª—è—è –∏—Ö –ø–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å—ã.
* –°—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —É–ø—Ä–æ—â–∞–µ—Ç –∑–∞—â–∏—Ç—É –∏ –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏.

---

### –¢–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü

* –¢–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü —Ö—Ä–∞–Ω—è—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏.
* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü.
* –í x86\_64 ‚Äî 4 —É—Ä–æ–≤–Ω—è: PML4, PDP, PD, PT.

---

### –ú–µ—Ö–∞–Ω–∏–∑–º —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤

* –ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞.
* –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç page fault ‚Äî –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –û–°.

---

### –ó–∞—â–∏—Ç–∞ –ø–∞–º—è—Ç–∏

* –¢–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏—Ç—ã –¥–æ—Å—Ç—É–ø–∞ (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å/–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ).
* –ü–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏ –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –µ—ë —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è.

---

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —è–¥—Ä–µ

* –í—ã–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü (buddy allocator, slab allocator).
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ swap-–ø–∞–º—è—Ç—å—é (–ø–æ–¥–∫–∞—á–∫–∞ –Ω–∞ –¥–∏—Å–∫).
* –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è.

---

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã 2025 –≥–æ–¥–∞

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ (TLB, MMU).
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (HugePages) –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
* –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ nested paging.
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏ RISC-V.

---

## üìò –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* Intel¬Æ 64 and IA-32 Architectures Software Developer‚Äôs Manual ‚Äî —Ä–∞–∑–¥–µ–ª –æ —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é
* –ö–Ω–∏–≥–∞: ‚ÄúOperating Systems: Three Easy Pieces‚Äù (Memory Management –≥–ª–∞–≤–∞)
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ x86\_64 paging –∏ MMU
* OSDev wiki: Paging ([—Å—Å—ã–ª–∫–∞](https://wiki.osdev.org/Paging))

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã:

* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∫–∞—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –±–∞–∑–æ–≤–æ–π –ø–∞–º—è—Ç–∏
* –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ buddy allocator –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
* –û–±—Ä–∞–±–æ—Ç–∫–∞ page fault —Å –≤—ã–≤–æ–¥–æ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

---

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ –°–∏23:

```c
#include <stdint.h>

#define PAGE_SIZE 4096

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω–∏—Ü (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
typedef struct {
    uint64_t entries[512];
} page_table_t;

page_table_t kernel_pml4 __attribute__((aligned(4096)));

void init_paging() {
    // –ü—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PML4 —Å identity mapping –ø–µ—Ä–≤—ã—Ö 2MB
    // (–î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π)
    kernel_pml4.entries[0] = 0x0000000000001003; // Present + RW + Address
    // TODO: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü —Å—Ç—Ä–∞–Ω–∏—Ü
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ page fault (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
void page_fault_handler() {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞, –≤—ã–∑–≤–∞–≤—à–µ–≥–æ –æ—à–∏–±–∫—É (CR2)
    uint64_t faulting_address;
    asm volatile ("mov %%cr2, %0" : "=r"(faulting_address));
    // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏
    // –í—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –≤—ã–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
}
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 7/10

---

## ‚è± –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ: 7‚Äì9 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 5‚Äì6 —á
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 2‚Äì3 —á

---

## üßë‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞:

* –õ–µ–∫—Ü–∏—è —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º —Ä–∞–∑–±–æ—Ä–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –∏ —Ç–∞–±–ª–∏—Ü —Å—Ç—Ä–∞–Ω–∏—Ü
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
* –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –Ω–∞–ø–∏—Å–∞—Ç—å –∏ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å—Ç—Ä–∞–Ω–∏—Ü
* –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π page fault handler

---

üî• –ï—Å–ª–∏ –≥–æ—Ç–æ–≤ ‚Äî –ø–∏—à–∏ **–¥–∞**, –∏ –º—ã –ø—Ä–æ–¥–æ–ª–∂–∏–º!
