–û—Ç–ª–∏—á–Ω–æ! –ü–æ–µ—Ö–∞–ª–∏ –¥–∞–ª—å—à–µ.

---

# üîπ –£—Ä–æ–∫ 5. –†–∞–±–æ—Ç–∞ —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ x86 –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –û–° ‚ö°üîÑ

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

–ò–∑—É—á–∞–µ–º –º–µ—Ö–∞–Ω–∏–∑–º –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ x86 ‚Äî –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è, –∫–∞–∫–∏–µ –µ—Å—Ç—å —Ç–∏–ø—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, –∏ –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (‚âà2500‚Äì3000 —Å–ª–æ–≤)

### –í–≤–µ–¥–µ–Ω–∏–µ –≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –≤ –û–°. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è: –≤–≤–æ–¥-–≤—ã–≤–æ–¥, —Ç–∞–π–º–µ—Ä, –æ—à–∏–±–∫–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã.

---

### –¢–∏–ø—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

* **–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:** –°–∏–≥–Ω–∞–ª—ã –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –¥–∏—Å–∫, —Ç–∞–π–º–µ—Ä)
* **–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:** –í—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
* **–ò—Å–∫–ª—é—á–µ–Ω–∏—è:** –û—à–∏–±–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å, –æ—à–∏–±–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ)

---

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –≤ x86

* **IDT (Interrupt Descriptor Table):** –¢–∞–±–ª–∏—Ü–∞ –≤ –ø–∞–º—è—Ç–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∞–¥—Ä–µ—Å–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
* **–í–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:** –ù–æ–º–µ—Ä, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤ IDT
* **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (ISR):** –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏

---

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (—Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞)
2. –ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É –ø–æ –∞–¥—Ä–µ—Å—É –∏–∑ IDT
3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–µ—Ä–≤–∞–Ω–Ω—ã–π –∫–æ–¥

---

### –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

* **PIC (Programmable Interrupt Controller):** –£–ø—Ä–∞–≤–ª—è–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
* –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö ‚Äî APIC (Advanced PIC)

---

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã

* –í—ã–∑–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `int` —Å –Ω–æ–º–µ—Ä–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, `int 0x80` –≤ Linux
* –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º —è–¥—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

---

### –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏

* –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
* –¢–∞–π–º–µ—Ä–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —É–ø—Ä–∞–≤–ª—è—é—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º

---

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏ (2025)

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MSI (Message Signaled Interrupts) –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ PIC –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä
* –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏—è—Ö

---

## üìò –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* Intel¬Æ 64 and IA-32 Architectures Software Developer‚Äôs Manual, Volume 3 (System Programming Guide)
* OSDev wiki: Interrupts ([—Å—Å—ã–ª–∫–∞](https://wiki.osdev.org/Interrupts))
* –ö–Ω–∏–≥–∞ ‚ÄúOperating Systems: Three Easy Pieces‚Äù ‚Äî –≥–ª–∞–≤—ã –ø—Ä–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
* –°—Ç–∞—Ç—å–∏ –ø–æ APIC –∏ MSI –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:

* –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É IDT —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
* –ù–∞–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–≥–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, –≤—ã–≤–æ–¥—è—â–∏–π –∫–æ–¥ –∫–ª–∞–≤–∏—à–∏
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ

---

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ –°–∏23 —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:

```c
#include <stdint.h>

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏ IDT (–≥–ª–æ–±–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π)
struct IDTEntry {
    uint16_t offset_low;  // –º–ª–∞–¥—à–∏–µ 16 –±–∏—Ç –∞–¥—Ä–µ—Å–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
    uint16_t selector;    // —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–¥–∞
    uint8_t  zero;        // –≤—Å–µ–≥–¥–∞ 0
    uint8_t  type_attr;   // –∞—Ç—Ä–∏–±—É—Ç—ã
    uint16_t offset_high; // —Å—Ç–∞—Ä—à–∏–µ 16 –±–∏—Ç –∞–¥—Ä–µ—Å–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
} __attribute__((packed));

struct IDTEntry idt[256];

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
void set_idt_entry(int n, uint32_t handler_addr) {
    idt[n].offset_low = handler_addr & 0xFFFF;
    idt[n].selector = 0x08; // —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–¥–∞ (–æ–±—ã—á–Ω–æ 0x08)
    idt[n].zero = 0;
    idt[n].type_attr = 0x8E; // –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ, –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –∫–æ–ª—å—Ü–µ 0
    idt[n].offset_high = (handler_addr >> 16) & 0xFFFF;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–∞—Å—Å–µ–º–±–ª–µ—Ä, –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π)
extern void keyboard_isr();

int main() {
    set_idt_entry(33, (uint32_t)keyboard_isr); // IRQ1 ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
    // –ó–∞–≥—Ä—É–∑–∫–∞ IDT, –≤–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∏ —Ç.–¥.
    // ...
    return 0;
}
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 7/10

---

## ‚è± –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ: 6‚Äì8 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 4 —á
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 2‚Äì4 —á

---

## üßë‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞:

* –õ–µ–∫—Ü–∏—è —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Ä–∞–∑–±–æ—Ä–æ–º —Ä–∞–±–æ—Ç—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ IDT
* –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
* –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –æ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

---

üî• –ì–æ—Ç–æ–≤ –∫ —É—Ä–æ–∫—É 6? –ü–∏—à–∏ **–¥–∞**!
