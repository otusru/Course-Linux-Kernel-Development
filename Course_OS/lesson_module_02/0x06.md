–û—Ç–ª–∏—á–Ω–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.

---

# üîπ –£—Ä–æ–∫ 6. –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ x86: –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è üß†üõ†Ô∏è

---

## üß© –¢–µ–º–∞ —É—Ä–æ–∫–∞:

–†–∞–∑–±–µ—Ä—ë–º, —á—Ç–æ —Ç–∞–∫–æ–µ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–º—è—Ç–∏, –∑–∞—á–µ–º –æ–Ω–∞ –Ω—É–∂–Ω–∞, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ x86, –∏ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –≤ –û–°. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã, —Ç–∞–±–ª–∏—Ü—ã –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤, –ø—Ä–∏–≤—è–∑–∫—É –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏.

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (‚âà2500‚Äì3000 —Å–ª–æ–≤)

### –í–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—é

–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –±–∞–∑–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é, –≤–ø–µ—Ä–≤—ã–µ –≤–Ω–µ–¥—Ä—ë–Ω–Ω—ã–π –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ x86. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –ø–∞–º—è—Ç—å –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã: –∫–æ–¥, –¥–∞–Ω–Ω—ã–µ, —Å—Ç–µ–∫ –∏ —Ç.–¥. –≠—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ –∏ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

---

### –û—Å–Ω–æ–≤—ã —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

* –ö–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç –∏–º–µ–µ—Ç –±–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å, —Ä–∞–∑–º–µ—Ä (–ª–∏–º–∏—Ç) –∏ –∞—Ç—Ä–∏–±—É—Ç—ã –¥–æ—Å—Ç—É–ø–∞
* –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã (CS, DS, SS, ES, FS, GS) –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
* –ê–¥—Ä–µ—Å —Å–µ–≥–º–µ–Ω—Ç–∞ + —Å–º–µ—â–µ–Ω–∏–µ –æ–±—Ä–∞–∑—É—é—Ç –ª–∏–Ω–µ–π–Ω—ã–π –∞–¥—Ä–µ—Å

---

### –¢–∞–±–ª–∏—Ü—ã –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤

* **GDT (Global Descriptor Table):** –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
* **LDT (Local Descriptor Table):** –õ–æ–∫–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–≥–º–µ–Ω—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞
* –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç: –±–∞–∑—É, –ª–∏–º–∏—Ç, —Ç–∏–ø —Å–µ–≥–º–µ–Ω—Ç–∞, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

---

### –§–æ—Ä–º–∞—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞

* 8 –±–∞–π—Ç –Ω–∞ –∫–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç
* –ü–æ–ª—è: –±–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å (32 –±–∏—Ç–∞), –ª–∏–º–∏—Ç (20 –±–∏—Ç), —Ç–∏–ø, DPL (—É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π), –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –∏ –¥—Ä.

---

### –°–µ–≥–º–µ–Ω—Ç–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤

* –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
* –û—à–∏–±–∫–∏ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º (faults)

---

### –°–≤—è–∑—å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –ø–ª–æ—Å–∫–æ–π –º–æ–¥–µ–ª—å—é –ø–∞–º—è—Ç–∏

* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –û–° –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–ª–æ—Å–∫—É—é –º–æ–¥–µ–ª—å ‚Äî –≤—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ç–∞–∫, —á—Ç–æ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å—é –ø–∞–º—è—Ç—å –±–µ–∑ —Å–º–µ—â–µ–Ω–∏–π
* –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å

* –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å—ë –±–æ–ª—å—à–µ —É—Å—Ç—É–ø–∞–µ—Ç –º–µ—Å—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–∞–º—è—Ç–∏ –∏ —Ç–∞–±–ª–∏—Ü–∞–º —Å—Ç—Ä–∞–Ω–∏—Ü (paging)
* –û–¥–Ω–∞–∫–æ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –∑–∞—â–∏—Ç—ã —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π

---

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –û–°

* –°–æ–∑–¥–∞–Ω–∏–µ GDT —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –¥–ª—è —è–¥—Ä–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

---

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏ (2025)

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ –∑–∞—â–∏—Ç—ã (Intel CET, Control-flow Enforcement Technology)
* –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ä–µ–¥–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω
* –ü–æ–≤—ã—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–µ

---

## üìò –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* Intel¬Æ 64 and IA-32 Architectures Software Developer‚Äôs Manual, Volume 3 ‚Äî —Ä–∞–∑–¥–µ–ª Segmentation
* OSDev wiki: Segmentation ([—Å—Å—ã–ª–∫–∞](https://wiki.osdev.org/Segmentation))
* –ö–Ω–∏–≥–∞ ‚ÄúIntel Architecture Software Developer‚Äôs Manual‚Äù
* –°—Ç–∞—Ç—å–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ CET –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã –ø–∞–º—è—Ç–∏

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:

* –°–æ–∑–¥–∞—Ç—å GDT —Å –º–∏–Ω–∏–º—É–º 3 —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏: –∫–æ–¥, –¥–∞–Ω–Ω—ã–µ, —Å—Ç–µ–∫
* –ó–∞–≥—Ä—É–∑–∏—Ç—å GDT –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã
* –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ –°–∏23 —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:

```c
#include <stdint.h>

// –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–µ–≥–º–µ–Ω—Ç–∞
struct SegmentDescriptor {
    uint16_t limit_low;      // –ù–∏–∂–Ω–∏–µ 16 –±–∏—Ç –ª–∏–º–∏—Ç–∞
    uint16_t base_low;       // –ù–∏–∂–Ω–∏–µ 16 –±–∏—Ç –±–∞–∑—ã
    uint8_t  base_middle;    // –°—Ä–µ–¥–Ω–∏–µ 8 –±–∏—Ç –±–∞–∑—ã
    uint8_t  access;         // –ê—Ç—Ä–∏–±—É—Ç—ã –¥–æ—Å—Ç—É–ø–∞
    uint8_t  granularity;    // –õ–∏–º–∏—Ç —Å—Ç–∞—Ä—à–∏–µ 4 –±–∏—Ç–∞ + —Ñ–ª–∞–≥–∏
    uint8_t  base_high;      // –°—Ç–∞—Ä—à–∏–µ 8 –±–∏—Ç –±–∞–∑—ã
} __attribute__((packed));

struct GDTPtr {
    uint16_t limit;
    uint32_t base;
} __attribute__((packed));

struct SegmentDescriptor gdt[3];
struct GDTPtr gdt_ptr;

void set_gdt_entry(int index, uint32_t base, uint32_t limit, uint8_t access, uint8_t gran) {
    gdt[index].limit_low = limit & 0xFFFF;
    gdt[index].base_low = base & 0xFFFF;
    gdt[index].base_middle = (base >> 16) & 0xFF;
    gdt[index].access = access;
    gdt[index].granularity = (limit >> 16) & 0x0F;
    gdt[index].granularity |= gran & 0xF0;
    gdt[index].base_high = (base >> 24) & 0xFF;
}

extern void gdt_flush(uint32_t);

void init_gdt() {
    gdt_ptr.limit = sizeof(gdt) - 1;
    gdt_ptr.base = (uint32_t)&gdt;

    set_gdt_entry(0, 0, 0, 0, 0);             // Null segment
    set_gdt_entry(1, 0, 0xFFFFF, 0x9A, 0xCF); // –ö–æ–¥–æ–≤—ã–π —Å–µ–≥–º–µ–Ω—Ç
    set_gdt_entry(2, 0, 0xFFFFF, 0x92, 0xCF); // –°–µ–≥–º–µ–Ω—Ç –¥–∞–Ω–Ω—ã—Ö

    gdt_flush((uint32_t)&gdt_ptr);
}

int main() {
    init_gdt();
    // –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã
    return 0;
}
```

---

## üß† –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: 7/10

---

## ‚è± –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ: 7‚Äì9 —á–∞—Å–æ–≤

* –¢–µ–æ—Ä–∏—è: 5 —á
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 2‚Äì4 —á

---

## üßë‚Äçüè´ –ú–µ—Ç–æ–¥–∏–∫–∞:

* –õ–µ–∫—Ü–∏—è —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º —Ä–∞–∑–±–æ—Ä–æ–º —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
* –°—Ö–µ–º—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GDT
* –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ –∏ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–µ

---

üî• –ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –∫ —É—Ä–æ–∫—É 7? –ü–∏—à–∏ **–¥–∞**!
