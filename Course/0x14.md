–û—Ç–ª–∏—á–Ω–æ, –ø–æ–≥—Ä—É–∂–∞–µ–º—Å—è –≤ —Å–µ—Ç—å! üåêüöÄ

---

### üîπ –£—Ä–æ–∫ 14. –°–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫: –æ—Å–Ω–æ–≤—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ ‚Äî —Å–µ—Ä–¥—Ü–µ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ —Å–µ—Ç–µ–≤–æ–≥–æ —Å—Ç–µ–∫–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ Ethernet, IP, TCP/UDP, –∏ –Ω–∞—É—á–∏–º—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã:

* –ú–æ–¥–µ–ª—å OSI –∏ TCP/IP: —É—Ä–æ–≤–Ω–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
* Ethernet –∏ —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Ç–µ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
* –ü—Ä–æ—Ç–æ–∫–æ–ª IP: –∞–¥—Ä–µ—Å–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
* –ü—Ä–æ—Ç–æ–∫–æ–ª—ã TCP –∏ UDP: –æ—Å–Ω–æ–≤—ã –∏ —Ä–∞–∑–ª–∏—á–∏—è
* –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ –û–°

---

### –ü—Ä–∏–º–µ—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (network/ethernet.c)

```c
#include <stdint.h>

#define ETH_ALEN 6

typedef struct {
    uint8_t dest[ETH_ALEN];
    uint8_t src[ETH_ALEN];
    uint16_t ethertype;
    uint8_t payload[1500];
} __attribute__((packed)) ethernet_frame_t;

void handle_ethernet_frame(ethernet_frame_t* frame)
{
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º ethertype –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º
    if(frame->ethertype == 0x0800) {
        // –≠—Ç–æ IPv4 –ø–∞–∫–µ—Ç, –≤—ã–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ IP
        handle_ip_packet(frame->payload);
    }
}
```

---

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

* Ethernet ‚Äî –∫–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å, –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–µ–¥–∞—á—É –∫–∞–¥—Ä–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.
* –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç MAC-–∞–¥—Ä–µ—Å–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è.
* –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–¥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–∞–∑–±–æ—Ä –Ω–∞ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö (IP, TCP).
* –í–∞–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ:

* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Ethernet-–∫–∞–¥—Ä–∞.
* –ù–∞–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø—Ä–∏–µ–º–∞ –∫–∞–¥—Ä–æ–≤.
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à—É—é –æ—Ç–ø—Ä–∞–≤–∫—É Ethernet-–∫–∞–¥—Ä–æ–≤.
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

---

### –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –∏ –ø—Ä–∞–∫—Ç–∏–∫—É:

* –¢–µ–æ—Ä–∏—è: 5 —á–∞—Å–æ–≤
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 8 —á–∞—Å–æ–≤

---

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* OSDev Wiki: Networking ([https://wiki.osdev.org/Networking](https://wiki.osdev.org/Networking))
* RFC 791 (IP), RFC 793 (TCP), RFC 768 (UDP)
* –ö–Ω–∏–≥–∏ –ø–æ —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º –∏ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é

---

### –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ OSI –∏ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã Ethernet –∏ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
* –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
* –û—Ç–ª–∞–¥–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ç–µ–≤—ã—Ö —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ –∏ —Å–Ω–∏—Ñ—Ñ–µ—Ä–æ–≤

---

–ì–æ—Ç–æ–≤—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —É—Ä–æ–∫—É 15 ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ IP? üöÄ
