–û—Ç–ª–∏—á–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º! ‚è∞ –°–µ–≥–æ–¥–Ω—è —É—á–∏–º –û–° –ø–æ–Ω–∏–º–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ! ‚è≥üìü

---

### üîπ –£—Ä–æ–∫ 27. –°–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–∞–π–º–µ—Ä—ã

---

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –Ω–∞—à–∞ –û–° —É–º–µ–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç–∏–∫ –æ—Ç —Ç–∞–π–º–µ—Ä–∞, –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è**, –∞ —Ç–∞–∫–∂–µ –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º —è–¥—Ä–∞) –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–∞–π–º–µ—Ä—ã –∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤, `sleep()`, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —á–∞—Å–æ–≤ –∏ –¥–∞–∂–µ cron-–ø–æ–¥–æ–±–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã:

* –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ç–∏–∫–∞—Ö, –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö, —Å–µ–∫—É–Ω–¥–∞—Ö
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ (uptime, —á–∞—Å—ã —Å–∏—Å—Ç–µ–º—ã)
* –ü—Ä–æ—Å—Ç—ã–µ —Ç–∞–π–º–µ—Ä—ã: –∑–∞–¥–µ—Ä–∂–∫–∏ (sleep), —Ç–∞–π–º–∞—É—Ç—ã
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏ –≤ —è–¥—Ä–µ
* –û–±—Ä–∞–±–æ—Ç–∫–∞ ¬´–ø—Ä–æ—Å–Ω—É–≤—à–∏—Ö—Å—è¬ª –∑–∞–¥–∞—á

---

### –ü—Ä–∏–º–µ—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (time/system\_time.c)

```c
#include <stdint.h>

static volatile uint64_t tick_count = 0;
#define TICKS_PER_SECOND 100

void increment_ticks() {
    tick_count++;
}

uint64_t get_ticks() {
    return tick_count;
}

uint64_t get_uptime_seconds() {
    return tick_count / TICKS_PER_SECOND;
}

void sleep_ticks(uint64_t ticks) {
    uint64_t target = get_ticks() + ticks;
    while (get_ticks() < target) {
        // –ü—É—Å—Ç–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ ‚Äî –ø–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –Ω–∞ yield()
    }
}
```

---

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

* –ö–∞–∂–¥—ã–π —Ç–∏–∫ ‚Äî —ç—Ç–æ 10 –º—Å (–µ—Å–ª–∏ —á–∞—Å—Ç–æ—Ç–∞ —Ç–∞–π–º–µ—Ä–∞ 100 –ì—Ü).
* `tick_count` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ —Å –∑–∞–ø—É—Å–∫–∞.
* –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –ø–æ–ª—É—á–∏—Ç—å –∞–ø—Ç–∞–π–º –∏–ª–∏ –∑–∞–¥–∞—Ç—å —Ç–∞–π–º–µ—Ä—ã.
* –í –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤, —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á.

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ:

* –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–∏–∫–æ–≤ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É PIT.
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_ticks()`, `get_uptime_seconds()` –∏ `sleep_ticks()`.
* –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç: –∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã, –≤—ã–≤–µ—Å—Ç–∏ "–ü—Ä–æ—à–ª–æ 2 —Å–µ–∫—É–Ω–¥—ã!"
* –ü–æ–¥—É–º–∞—Ç—å, –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ (–±–µ–∑ busy-wait).

---

### –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –∏ –ø—Ä–∞–∫—Ç–∏–∫—É:

* –¢–µ–æ—Ä–∏—è: 3 —á–∞—Å–∞
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 6 —á–∞—Å–æ–≤

---

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* OSDev Wiki: Timer
* K\&R: ¬´The C Programming Language¬ª (–¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–æ–≤ –Ω–∞ C)
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è POSIX –ø–æ `sleep()` –∏ `usleep()` (–¥–ª—è –∞–Ω–∞–ª–æ–≥–∏–∏)

---

### –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –†–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø–æ —Ç–∏–∫-—Å—á—ë—Ç—á–∏–∫—É
* –ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏ –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –∞–ø—Ç–∞–π–º–∞
* –ü—Ä–∞–∫—Ç–∏–∫–∞: –∑–∞–ø—É—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∞–π–º–µ—Ä
* –û–±—Å—É–∂–¥–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ

---

‚è≤Ô∏è –¢–µ–ø–µ—Ä—å —É —Ç–≤–æ–µ–π –û–° –µ—Å—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è** ‚Äî –≤–∞–∂–Ω–µ–π—à–∞—è —á–∞—Å—Ç—å –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏!

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —É—Ä–æ–∫—É 28 ‚Äî –≤–≤–æ–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞? üéπ‚å®Ô∏è
