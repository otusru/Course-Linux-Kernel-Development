–û—Ç–ª–∏—á–Ω–æ! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ **—É—Ä–æ–∫ 102** ‚Äî –∑–¥–µ—Å—å —Ç—ã –Ω–∞–ø–∏—à–µ—à—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `malloc()` –∏ `free()` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞. üéØ –≠—Ç–æ –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å **—Å–µ—Ä–¥—Ü–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** ‚Äî –≤–∞–∂–Ω–µ–π—à–∏–π –Ω–∞–≤—ã–∫ –∫–∞–∂–¥–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞! üß†üìà

---

### üîπ –£—Ä–æ–∫ 102. –ù–∞–ø–∏—Å–∞–Ω–∏–µ `malloc` –∏ `free` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

---

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ ‚Äî –æ—Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç—ã –ª—é–±–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ë–µ–∑ `malloc()` –∏ `free()` –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã, —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å–∞–º–∏. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ —Ç—ã —Ä–µ–∞–ª–∏–∑—É–µ—à—å —Å–≤–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–º—è—Ç–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞: –ª—ë–≥–∫–∏–π, –±—ã—Å—Ç—Ä—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã:

* –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `malloc()` –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
* –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –Ω–∞ –±–ª–æ–∫–∏: free list, –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
* –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: first-fit, best-fit
* –°–ª–∏—è–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –±–ª–æ–∫–æ–≤ (coalescing), –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `free()` –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
* –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º heap (—á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã —è–¥—Ä–∞)
* –ù–∞–ø–∏—Å–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∞–ª–ª–æ–∫–∞—Ç–æ—Ä–∞: `brk`, `sbrk`, –∏–ª–∏ `mmap` –∞–Ω–∞–ª–æ–≥
* –ó–∞—â–∏—Ç–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞: —Å—Ç–æ—Ä–æ–∂–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
* –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è, –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
* –ö–∞–∫ libc –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤ Linux: `ptmalloc`, `dlmalloc`, `tcmalloc`

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ:

* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π heap –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
* –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `malloc(size_t size)` –∏ `free(void *ptr)`
* –î–æ–±–∞–≤–∏—Ç—å –≤–µ–¥–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –±–ª–æ–∫–æ–≤
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–æ–π–Ω–æ–π `free`)
* –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–¥–µ–ª—è–µ—Ç, –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞–º—è—Ç—å
* –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–∑–º–µ—Ä–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
* –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å README –∏ —Å—Ö–µ–º—ã —Ä–∞–±–æ—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–º—è—Ç–∏

---

### –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –∏ –ø—Ä–∞–∫—Ç–∏–∫—É:

* –¢–µ–æ—Ä–∏—è: 6 —á–∞—Å–æ–≤
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 35 —á–∞—Å–æ–≤

---

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* [How malloc works](https://danluu.com/malloc-tutorial/)
* –ö–Ω–∏–≥–∞: ¬´Operating Systems: Three Easy Pieces¬ª ‚Äî –≥–ª–∞–≤–∞ –ø—Ä–æ –ø–∞–º—è—Ç—å
* –ò—Å—Ç–æ—á–Ω–∏–∫ `dlmalloc` –∏ `ptmalloc` (glibc)
* OSDev Wiki: [Memory Management](https://wiki.osdev.org/Memory_Allocation)

---

### –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ: –∫–∞–∫ –ø–∞–º—è—Ç—å –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç free list
* –ñ–∏–≤–æ–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º `malloc()` –∏ `free()`
* –û—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ –¥–∞–º–ø –ø–∞–º—è—Ç–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
* –û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º: —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è, –∑–∞—â–∏—Ç–∞, —É—Ç–µ—á–∫–∏
* –†–∞–∑–±–æ—Ä –ø–æ–¥—Ö–æ–¥–æ–≤ Linux, BSD –∏ –¥—Ä—É–≥–∏—Ö –û–°

---

üß† –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª **—Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∞–ª–ª–æ–∫–∞—Ç–æ—Ä –ø–∞–º—è—Ç–∏**, –∏ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å **–ª—é–±—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –≤ —Å–≤–æ–µ–π –û–°!

–•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å **—É—Ä–æ–∫–æ–º 103: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (syscalls) –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö**? üß¨üìû
