–û—Ç–ª–∏—á–Ω–æ! üéâ –ü–æ–≥—Ä—É–∂–∞–µ–º—Å—è –≤ **—É—Ä–æ–∫ 103** ‚Äî —Ç–µ–ø–µ—Ä—å —Ç–≤–æ—è –û–° —Å—Ç–∞–Ω–µ—Ç ¬´—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å¬ª —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã. üß¨üìû –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ —è–¥—Ä–æ–º ‚Äî —Ç–≤–æ—è –û–° –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!

---

### üîπ –£—Ä–æ–∫ 103. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (syscalls) –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

---

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–æ—Å—Ç –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (Ring 3) –∏ —è–¥—Ä–æ–º (Ring 0). –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ñ—É–Ω–∫—Ü–∏—è–º —è–¥—Ä–∞, —Ç–∞–∫–∏–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏, –ø–∞–º—è—Ç—å—é, –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ —Ç—ã —Ä–µ–∞–ª–∏–∑—É–µ—à—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ —Å–≤–æ–µ–π –û–°.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã:

* –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã
* –ú–µ—Ö–∞–Ω–∏–∑–º `syscall` / `sysret` –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ x86-64
* –ü–µ—Ä–µ–¥–∞—á–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π
* –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ –≤—ã–∑–æ–≤–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Ä–µ–≥–∏—Å—Ç—Ä—ã RDI, RSI, RDX, ...)
* –¢–∞–±–ª–∏—Ü–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —è–¥—Ä–µ
* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è syscall –ø–æ –Ω–æ–º–µ—Ä—É
* –ë–∞–∑–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã: `write`, `read`, `exit`, `malloc`, `free`
* –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
* –ö–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç Linux: —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –≤—ã–∑–æ–≤–æ–≤ (debug output)

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ:

* –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã MSR –¥–ª—è `syscall`/`sysret` –≤ —è–¥—Ä–µ
* –ù–∞–ø–∏—Å–∞—Ç—å –æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ syscall –≤ —è–¥—Ä–µ
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ñ—É–Ω–∫—Ü–∏–π –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—é –ø–æ –Ω–æ–º–µ—Ä—É
* –ù–∞–ø–∏—Å–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–±–æ–ª–æ—á–∫–∏ –¥–ª—è –≤—ã–∑–æ–≤–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `libc_write`)
* –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∏—Å–ø–æ–ª—å–∑—É—é—â—É—é —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã
* –î–æ–±–∞–≤–∏—Ç—å –∂—É—Ä–Ω–∞–ª –≤—ã–∑–æ–≤–æ–≤ –≤ —è–¥—Ä–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
* –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å README —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º API –∏ —Ç–∞–±–ª–∏—Ü–µ–π –≤—ã–∑–æ–≤–æ–≤

---

### –í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –∏ –ø—Ä–∞–∫—Ç–∏–∫—É:

* –¢–µ–æ—Ä–∏—è: 8 —á–∞—Å–æ–≤
* –ü—Ä–∞–∫—Ç–∏–∫–∞: 30 —á–∞—Å–æ–≤

---

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

* Intel SDM: [SYSCALL/SYSRET Instructions](https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html)
* OSDev Wiki: [System Calls](https://wiki.osdev.org/System_Call)
* –†–∞–∑–±–æ—Ä `strace` –∏ —Ç–∞–±–ª–∏—Ü—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ Linux
* –ü—Ä–∏–º–µ—Ä—ã `libc` –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫ `syscall` –≤ glibc –∏ musl

---

### –ú–µ—Ç–æ–¥–∏–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏—è:

* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—ã–∑–æ–≤–æ–º
* –ü–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ MSR –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ syscall entry
* –û—Ç–ª–∞–¥–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ Linux –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
* –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö syscall API

---

üìû –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢–µ–ø–µ—Ä—å —Ç–≤–æ—è –û–° —É–º–µ–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ **–Ω–∞—Å—Ç–æ—è—â–∏–π syscall-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**, –∫–∞–∫ –≤ Linux –∏–ª–∏ BSD. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —à–∞–≥ –Ω–∞ –ø—É—Ç–∏ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –û–°.

–•–æ—á–µ—à—å –ø–µ—Ä–µ–π—Ç–∏ –∫ **—É—Ä–æ–∫—É 104: –ú–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ**? üßµ‚öôÔ∏è
